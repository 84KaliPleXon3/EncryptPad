CRYPT_ROOT=..
BOTAN_DIR=$(CRYPT_ROOT)/deps/botan

include ../deps/makefiles/platform.mak
ifeq ($(UNIX),on)
PARAMS=
else ifeq ($(PLATFORM),MACOS)
PARAMS=--cc=clang
else
PARAMS=--cpu=x86_32
endif

all:: $(BOTAN_DIR)/libbotan-2.a
$(BOTAN_DIR)/libbotan-2.a:
	cd $(BOTAN_DIR) && ./configure.py $(PARAMS) --amalgamation --with-zlib --enable-modules aes,pbkdf2,auto_rng,compression
#--with-bzip2
	$(MAKE) -C $(BOTAN_DIR) libs
clean:
	$(MAKE) -C $(BOTAN_DIR) clean
